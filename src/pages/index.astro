---
import { Picture } from '@astrojs/image/components';
import Anchor from '@components/Anchor.astro';
import GithubCard from '@components/GithubCard.astro';
import PostCard from '@components/PostCard.astro';
import Layout from '@layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { ArrowRight } from 'lucide-preact';

const repos = ['feedjoy', 'geoguessr-clone'];
const posts = (await getCollection('posts'))
  .sort((a, b) => b.data.published.valueOf() - a.data.published.valueOf())
  .slice(0, 2);
---

<Layout>
  <section class="mt-fluid-5 flex justify-between gap-fluid-4">
    <div>
      <h1 class="font-normal text-5xl">Hi, I'm Christian</h1>
      <h2 class="text-2 text-2xl">Front-End Web Developer</h2>
      <ul class="mt-fluid-4 flex flex-col gap-fluid-1">
        <li class="flex flex-wrap items-center gap-x-2">
          <ArrowRight class="shrink-0" /> Web Developer
          <Anchor href={import.meta.env.JOB}>@McKesson</Anchor>
        </li>
        <li class="flex flex-wrap items-center gap-x-2">
          <ArrowRight class="shrink-0" /> CS Bachelors
          <Anchor href={import.meta.env.COLLEGE}>@LaRoche</Anchor>
        </li>
        <li class="flex flex-wrap items-center gap-x-2">
          <ArrowRight class="shrink-0" /> Pittsburgh, PA, USA
        </li>
      </ul>
    </div>
    <div
      class={`relative rounded-full ring-2 ring-brand ring-opacity-50
              w-[250px] h-[250px] lg:h-[320px] lg:w-[320px] md:block hidden
              before:absolute before:inset-0 before:rounded-full before:bg-2`}
    >
      <Picture
        src={import('@public/me.webp')}
        alt="A picture of me"
        widths={[250, 320, 2048]}
        sizes="(min-width: 1024px) 320px, 250px"
        class="relative rounded-full"
      />
    </div>
  </section>
  <div class="my-fluid-4 mx-auto h-1 w-10/12 rounded-md bg-2"></div>
  <section class="flex flex-col gap-fluid-2">
    <h3 class="text-2 text-xl">Projects</h3>
    <!-- prettier-ignore -->
    <ul class="grid gap-fluid-4 lg:grid-cols-2">
      {repos.map((repo) => <li><GithubCard repo={repo} /></li>)}
    </ul>
  </section>
  <div class="my-fluid-4 mx-auto h-1 w-10/12 rounded-md bg-2"></div>
  <section class="flex flex-col gap-fluid-2">
    <h3 class="text-2 text-xl">Recent Posts</h3>
    <!-- prettier-ignore -->
    <ul class="grid gap-fluid-4 lg:grid-cols-2">
      {posts.map((post) => <li><PostCard post={post} /></li>)}
    </ul>
    <a href="/blog" class="group flex items-center gap-2 self-end">
      <span class="text-sm group-hover:text-brand">View All Posts</span>
      <ArrowRight aria-hidden class="stroke-brand shrink-0" />
    </a>
  </section>
</Layout>
